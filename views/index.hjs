<!DOCTYPE html>
<html lang="<%site.lang%>" manifest="/kyukou.appcache" prefix="og: http://ogp.me/ns#"
   data-ng-app="kyukouApp">
  <head>
    <meta charset="utf-8" />
    <title><%site.name%></title>
    <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><![endif]-->
    <!--[if lt IE 9]><script src="lib/html5shiv/html5shiv-printshiv.js"></script><![endif]-->
    <meta name="author" content="<%site.author%>" />
    <meta name="description" content="<%site.description%>">
    <meta name="keywords" content="<%site.keywords%>"/>
    <meta property="og:title" content="<%site.name%>">
    <meta property="og:type" content="website">
    <meta property="og:description" content="<%site.description%>">
    <meta property="og:url" content="<%site.url%>">
    <meta property="og:site_name" content="<%site.name%>">
    <meta name="viewport" content="width=device-width" />
    <script src="/lib/angular/angular.min.js" defer></script>
    <script src="/lib/angular-bootstrap/ui-bootstrap.min.js" defer></script>
    <script src="/js/app.js" defer></script>
    <link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/icomoon/style.css" />
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="icon" type="image/vnd.microsoft.icon" href="/favicon.ico" />
    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="/favicon.ico" />
    <link rel="alternate" type="application/rss+xml" title="<%site.name%>" href="<%site.url%>/rss" />
    <script type="text/ng-template" id="kyukou-loading">
      <div class="alert" role="alert"
         data-ng-class="{'alert-info': !loading.err, 'alert-danger': loading.err}">
        <p class="lead"
           data-ng-show="!loading.err">Now loading...<p>
        <p class="lead"
           data-ng-show="loading.err">Load error ({{loading.status}}). Please <a href="./">load again</a>.<p>
      </div>
    </script>
    <script type="text/ng-template" id="kyukou-app">
      <section>
        <h2>
          <a title="検索"
             data-ng-click="isCollapsed = !isCollapsed">
            <span class="glyphicon"
               data-ng-class="{'glyphicon-chevron-down': !isCollapsed, 'glyphicon-chevron-right': isCollapsed}">
            </span>検索</a> <small class="badge">{{filtered.length}}/{{events.length}}</small>
        </h2>
        <div class="collapse"
           data-collapse="isCollapsed">
          <p class="input-group input-group-lg">
            <label class="input-group-addon" for="query-filter">Filter:</label>
            <input type="text" id="query-filter" class="form-control"
               data-ng-model="queryFilter" />
          </p>
          <dl>
            <dt class="">種別</dt>
            <dd class="btn-group">
              <label class="btn btn-default btn-lg"
                 data-ng-repeat="about in abouts"
                 data-ng-class="{active: isSelectedAbout(about)}">
                <input type="checkbox" value="{{about}}"
                   data-ng-click="setSelectedAbouts()" />{{about}}
              </label>
            </dd>
            <dt class="">学部</dt>
            <dd class="btn-group">
              <label class="btn btn-default btn-lg"
                 data-ng-repeat="department in departments"
                 data-ng-class="{active: isSelectedDepartment(department)}">
                <input type="checkbox" value="{{department}}"
                   data-ng-click="setSelectedDepartments()" />{{department}}
              </label>
            </dd>
          </dl>
        </div>
      </section>
      <table class="table table-bordered table-hover table-sortable">
        <thead>
          <tr>
            <th
               data-ng-click="setSorting('about')">種別<span class="glyphicon"
                  data-ng-show="isSortedCol('about')"
                  data-ng-class="{'glyphicon-chevron-down': !sort.desc, 'glyphicon-chevron-up': sort.desc}">
              </span></th>
            <th
               data-ng-click="setSorting('datetime')">日付<span class="glyphicon"
                  data-ng-show="isSortedCol('datetime')"
                  data-ng-class="{'glyphicon-chevron-down': !sort.desc, 'glyphicon-chevron-up': sort.desc}">
              </span></th>
            <th
               data-ng-click="setSorting('period')">時限<span class="glyphicon"
                  data-ng-show="isSortedCol('period')"
                  data-ng-class="{'glyphicon-chevron-down': !sort.desc, 'glyphicon-chevron-up': sort.desc}">
              </span></th>
            <th
               data-ng-click="setSorting('department')">学部<span class="glyphicon"
                  data-ng-show="isSortedCol('department')"
                  data-ng-class="{'glyphicon-chevron-down': !sort.desc, 'glyphicon-chevron-up': sort.desc}">
              </span></th>
            <th
               data-ng-click="setSorting('subject')">授業科目名<span class="glyphicon"
                  data-ng-show="isSortedCol('subject')"
                  data-ng-class="{'glyphicon-chevron-down': !sort.desc, 'glyphicon-chevron-up': sort.desc}">
              </span></th>
            <th
               data-ng-click="setSorting('teacher')">担当教員<span class="glyphicon"
                  data-ng-show="isSortedCol('teacher')"
                  data-ng-class="{'glyphicon-chevron-down': !sort.desc, 'glyphicon-chevron-up': sort.desc}">
              </span></th>
            <th
               data-ng-click="setSorting('note')">備考<span class="glyphicon"
                  data-ng-show="isSortedCol('note')"
                  data-ng-class="{'glyphicon-chevron-down': !sort.desc, 'glyphicon-chevron-up': sort.desc}">
              </span></th>
          </tr>
        </thead>
        <tbody>
          <tr title="{{event.raw}}"
             data-ng-repeat="event in filtered = (events | aboutFilter:selectedAbouts | departmentFilter:selectedDepartments | filter:queryFilter | orderBy:sort.col:sort.desc)">
            <td>{{event.about}}</td>
            <td><time datetime="{{event.datetime}}">{{event.dateformatted}}</time></td>
            <td>{{event.period}}</td>
            <td>{{event.department}}</td>
            <td><a target="_blank" href="{{event.link}}">{{event.subject}}</a></td>
            <td>{{event.teacher}}</td>
            <td>{{event.note}} {{event.campus}} {{event.room}}</td>
          </tr>
        </tbody>
      </table>
    </script>
  </head>
  <body>
    <div class="container">
      <header class="page-header clearfix">
        <h1><%site.name%></h1>
        <p><%site.description%></p>
        <p id="header-buttons"><a class="icon-twitter" target="_blank" href="https://twitter.com/<%site.twitter%>" title="Twitter"><span>Twitter</span></a><a class="icon-feed" href="/rss" title="RSS"><span>RSS</span></a></p>
      </header>
      <main role="main"
         data-ng-include="ctrlTmpl"
         data-ng-controller="eventListCtrl">
        <noscript>
          <div class="alert alert-danger">
            <h2><%site.name%>はJavaScriptを使用しています。</h2>
            <p>お使いのブラウザのJavaScriptを有効にしてご利用ください。</p>
          </div>
        </noscript>
      </main>
      <footer class="page-footer">
        <p class="text-center lead"><a target="_blank" href="https://twitter.com/<%site.twitter%>" title="Twitter: @<%site.twitter%>">Twitter</a> · <a href="/rss" title="RSS">RSS</a> · <a href="/status" title="Status">Status</a> · <a href="/api" title="API">API</a></p>
        <p class="text-center"><a href="/" title="<%site.name%> <%site.version%>"><%site.name%></a> <small><%site.version%></small> by <a target="_blank" href="https://github.com/<%site.author%>" title="Github: @<%site.author%>">@<%site.author%></a> · Open Sourced on <a target="_blank" href="https://github.com/<%site.author%>/kyukou" title="<%site.author%>/kyukou">GitHub</a></p>
      </footer>
    </div>
  </body>
</html>

#!/usr/bin/env node

var Bluebird = require('bluebird');

var dbConnection = require('../db');

var tasklogs = ['task', 'twit_new', 'twit_tomorrow', 'delete'].map(function (name) {
  return {
    name: name,
    log: 'initialized',
    level: 1,
    time: new Date(),
    elapsedTime: 0
  };
});

Bluebird.using(dbConnection(), function (db) {
  var Tasklog = db.model('Tasklog');
  return Bluebird.all(tasklogs.map(function (tasklog) {
    return new Tasklog(tasklog).save();
  }));
}).then(function () {
  console.log('msg: db init success');
}).catch(function (err) {
  console.log('err: ' + err.stack);
});
